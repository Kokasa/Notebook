2025-02-21    12:03

status: #adult 
tags: [[机器数]]


# [[整型]]和[[浮点数(Floating Point)]]之间的转换

根据浮点数在计算机内存储方式, 可知浮点数在数轴上离散分布(见[[浮点数在数轴上的分布]])
![[浮点数在数轴上的分布-1740109334585.jpeg]]
但是仍有必要考虑两种数的结构以及标识范围

需要注意的是: 
- **整型和浮点数存储方式不同(结构不同)**
- **整型和浮点数表示范围和精度不同**
- **编译器只能尽量保证数值近似, 很难保证相等**

## 浮点数和浮点数转换

- float 转 double: 
	- double的尾数和阶码范围都比float大, 精度高于float, 所以转换结果不会出现精度损失, **完全相等**
- double 转 float: 
	- float表示范围小于double, 当范围超出float表示范围时会出现**溢出**
	- float精度小于double, 在进行高精度转换时会进行舍入, **取近似值**
- float/double 转 int
	- 这两种浮点数表示范围都比int大, 当进行大数转换时就会出现**溢出**
	- 浮点数的小数部分会直接被截断, 即**向下取整**
- int 转 float
	- 两种数机器数位数都是32位, 可表示的数据组合数相同, 但是在数轴上看这两种数的数据不完全重叠
	- float有24位尾数, 在这24位尾数内可以精确转换成int型, 但是如果超出这个范围(从32位int型来看, 高8位数据不为零), 则无法精确转换, 出现精度溢出
- int 转 double: 
	- double位数有53位, 可以精确表示53位长度的整型变量, 当然, 精度要高于53位长度的整型(从数轴上看)
	- 32位整数可以看作双精度浮点数的一个子集, **双精度浮点数能无损表示任何32位整数**

# References
