2025-02-21    14:28

status: #adult 
tags: [[二进制移位运算]]


# 算数移位

```
我想向你介绍一下我学到的算术移位的知识, 结合数制相关知识, 我知道数字是有位权的, 对于高位权的数值高位, 如果移位使它发生改变就代表结果改变很大, 也就是出错, 对于位权低的数值低位, 在移位时出现改变则不会对整个数有太大影响, 称作精度缺失

在进行原码移位时, 空位填补0即可, 在进行反码移位时, 空位填补1, 在进行补码移位时, 左移补0, 右移补1

可是我也有一些小问题, 他别是为什么反码移位需要补1, 还有补码为什么不考虑符号位时使用左移补0, 右移补1的方式, 但是考虑符号位时, 右移就需要补和符号位相同的数字, 这有两套规则, 令我有些混乱
```

![[算数移位-1740120141084.jpeg]]

## 位权和算数移位

左边的数值位权高, 如果高位权的数值改变了, 整个数的数值会出现很大的变化, 也就能被称为错误

## 进行算数移位的核心思想

```
哦, 我理解一些了, 补码和反码都是为了表示真值而存在的, 关键是看这次移位对真值带来的改变有多少, 对于带符号位的数, 可以通过和真值最接近的原码来判断, 如果这次移位带来了高位的改变, 就是不好的
```

除非一些特殊运算, 在一般的算数移位操作, 我们希望的是数值能够产生$2^n$的变化, 也就是数值能够被准确预测, 仍然能够被投入计算
但是如果数值改变太大, 例如溢出, 这个数就很难再被投入使用, 带来的改变是不好的

- **补码和反码的本质：** 补码和反码都是为了在计算机中表示有符号数而引入的。它们的设计目标是简化减法运算，并解决原码表示中+0和-0不一致的问题。
- **移位操作与真值：** 移位操作的本质是改变数值在二进制表示中的位置，从而改变数值的大小。对于有符号数，移位操作可能会影响到符号位，从而进一步影响到真值。
- **高位与低位：** 你提到的“高位权的数值高位”和“位权低的数值低位”的概念非常重要。高位对数值的影响更大，因此移位时需要特别注意，避免高位发生改变，否则可能导致数值出现较大偏差

## [[补码]]算数移位运算的两套规则

**移位的目的是保持数值的准确，即移位后的数值仍然是原数值的补码表示。**

```
哦, 我想补码的移位运算还是比较复杂的, 毕竟补码和真值比起来变化了许多

但是我们能够通过补码的转换过程来判断高位和低位的有效性, 再通过这个位数值是否包含必要信息来判断移位导致的数值变化

- 先从低位开始分析: 补码由反码+1得来, 或者也可以简单运算, 循环检验补码的最后一个1, 符号位不变, 在最后一个1之前的所有位取反, 这是数学上的结论, 这也能够看到对于补码来说, 最低位如果是0的话, 它是不记录精度信息的, 所以得出结论: 补码最低位丢1则精度缺失

- 再来看高位蕴含的信息, 对于补码和原码, 符号位到最后一个1之间的数值全部取反, 而对于原码来说, 最高位的0不记录进位信息, 对应过来就是补码的1, 所以可以得出结论, 补码最高位丢0则结果出错, 和反码一致
```
### 不考虑符号位
![[算数移位-1740121604924.jpeg]]
最高位补1, 最低位补0

### 考虑符号位

- 高位补和符号位相同的数字
- 低位补0
- 如果移动导致符号位改变, 就是溢出
#### 优点
- 溢出判断简单: 只要检测符号位是否改变就能够判断溢出
- 符号位和数值位一起移位, 在机器运算时具有优势, 也便于人类记忆

## 移位运算应用

- 快速乘法器
- 优化算法


# References

[[补码的算数移位运算规则]]