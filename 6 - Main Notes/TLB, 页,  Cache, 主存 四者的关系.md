tags: [[存储器]] 
## TLB、页表和 Cache 的层次关系

- **[[快表(Translation Lookaside Buffer, TLB)]]：** TLB 是页表的缓存，存储了最近使用的页表项。
- **页表：** 页表存储了虚拟地址和物理地址之间的映射关系。
- **Cache：** Cache 是主存的缓存，存储了最近使用的数据块。

## 命中情况的关联

由于 TLB 是页表的子集，Cache 是主存的子集，因此它们的命中情况是相互关联的。

- **TLB 命中：** 如果 TLB 命中，则说明对应的页表项也在页表中。此时，MMU 可以直接从 TLB 中获取物理地址，无需访问主存。
- **TLB 未命中，页表命中：** 如果 TLB 未命中，但页表命中，则说明对应的页表项在主存中。此时，MMU 需要访问主存，读取页表项，并将其存储到 TLB 中。
- **页表未命中：** 如果页表未命中，则说明对应的页面不在主存中。此时，MMU 会触发缺页中断，将页面从硬盘加载到主存中，并更新页表和 TLB。

## Cache 命中的情况

Cache 命中与 TLB 和页表的命中情况没有直接关系。Cache 命中只与所需的数据块是否在 Cache 中有关。

- **Cache 命中：** 如果所需的数据块在 Cache 中，则 CPU 可以直接从 Cache 中获取数据，无需访问主存。
- **Cache 未命中：** 如果所需的数据块不在 Cache 中，则 Cache 需要从主存中读取数据块，并将其存储到 Cache 中。

## 您提到的情况

您提到“TLB 命中，页表不命中，Cache 命中，主存中查找不到”的情况，这是不可能发生的。因为如果 TLB 命中，则说明对应的页表项也在页表中，MMU 可以直接从 TLB 中获取物理地址，无需访问主存。

## 总结

TLB、页表和 Cache 之间存在着层次关系，它们的命中情况是相互关联的。TLB 命中意味着页表命中，Cache 命中与 TLB 和页表的命中情况没有直接关系。

希望这些信息能帮助您更好地理解 TLB、页表和 Cache 之间的关系！如果您还有其他问题，欢迎随时提出。