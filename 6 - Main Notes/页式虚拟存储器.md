2025-02-16    14:44

status: #adult 
tags: [[存储器]]


# 页式虚拟存储器

```
计算机组成原理中, 对于页式虚拟存储器, 主存和辅存之间通过交换"页"来确保更常用的数据能够更快地访问, 近似于主存和Cache交换存储单元, 但是"页"比存储单元要大得多, 这不仅是因为辅存和主存的空间非常大, 更是因为辅存和主存的读取速度差距比主存和cache之间的读写速度差距大得多
```

## 页式虚拟存储器的工作方式

- 基本概念: 
	将主存和辅存划分成固定大小的块, 称为 **页** , 程序在加载时进行动态加载和替换
- 页表: 
	系统使用名为 **页表** 的数据结构来维护虚拟地址和物理地址之间的映射关系, 页表记录每个虚拟页是否在主存中, 以及在主存中的位置
- 地址转换: 
	虚拟内存使用虚拟地址记录位置, 在cpu访问时, 需要将虚拟地址转换成实际存放在辅存中的位置, 即物理地址. 如果访问的页不在主存, 会触发缺页中断, 需要从辅存中将页加载到主存
- 页面替换: 
	主存空间不足时使用一些算法将页面替换出去

## 页与存储单元的区别

页的设计思想和存储单元十分接近, 但是由于应用的设备不同, 实际实现上有明显不同

- 由于辅存读取的效率远远小于主存, 发生缺页的成本也会非常高, 所以将页设置的较大, 放进更多数据能有效降低缺页率, 一般为KB或者MB级别, 比存储单元大得多(字节, 字)
- 交换单位为页
- 交换速度: 比存储单元慢得多

### 为什么页会非常大

原因: 辅存价格低廉, 但是读写非常慢

- 传输更多的数据, 减少I/O次数
- 局部性原理: 更大的页有助于将经常访问的数据囊括其中
- 降低页表大小: 页表维护主存和辅存的映射关系

# References

[[按需加载-虚拟存储器]]