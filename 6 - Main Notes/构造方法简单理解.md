2024-12-11    17:20

status: #adult 

tags: [[Java]], [[OOP]], [[Principle]]


# 构造方法

## 构造方法是什么

构造方法(Constructor) 是[[面向对象编程(OOP)]] 中用于初始化[[对象]]的一种特殊方法.

### 生命周期
在[[类的实例化]]时被自动调用
### 作用

设置对象的初始状态

### 特别之处

#### 1. 名称与类名相同

构造方法的名称必须与类名完全相同

``` java
class Person {
        private String name;
        private int age;
    
        // 构造方法
        public Person(String name, int age) {
            this.name = name;
            this.age = age;
        }
    }
```
#### 2. 没有返回值类型

构造方法没有返回值类型, 包括void

因为构造方法的目的只有**初始化对象**, 而不是返回值

#### 3. 自动调用

当创建一个类的实例时自动调用构造方法

例如
``` java
Person person = new Person("Simon", 20)
```
这里new对象的时候自动调用了构造方法

#### 4. 可重载

类可以有多个构造方法, 每个构造方法都有不同的参数列表, 以支持不同的初始化方式
称为**构造方法重载**
和普通的[[方法重载]] 没有区别

### 5. Java会提供一个默认的无参构造


## 为什么使用构造方法

### 优点

#### 1. 保证对象的完整性

通过强制要求所有必需参数, 构造方法保证类的实例总是处于一个一致的状态
	即确保某个值不为空
#### 2. 简化代码, 避免重复

将初始化逻辑封装, 避免在类外部每次实例化时重复初始化字段

#### 3. 提高可读性和明确性

构造方法的参数可以清晰明确的表明对象需要的初始化数据

### 缺点

#### 1. 参数过长

当一个构造方法的参数过多, 会变得难以理解和维护
如果一个类需要很多参数, 这将不是一个好的设计
##### 解决办法
使用[[建造者模式(Builder Pattern)]], 尤其是参数较多时, 通过链式调用设置参数
#### 2. 不适用可变对象

如果对象的状态在创建后会发生变化, 更推荐使用setter方法或者其他设计模式

#### 3. 难以维护

当一个类有多个构造方法时, 特别是参数类型和数量差异较大时, 可能会造成混乱和错误

##### 解决办法

1. 使用 [[工厂模式(Factory Method)]]
2. 使用 [[建造者模式(Builder Pattern)]]
3.  使用默认值或者调用setter方法设置属性
4. 避免不必要的构造方法重载

# 总结

- 构造方法是一个方法
- 用于初始化对象
- java会提供一个默认的无参构造
- 适合简单的初始化

# References

[[我们是否提倡构造方法的使用]]
[[什么是构造方法]]